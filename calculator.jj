options{
  STATIC = false;
  JDK_VERSION = "1.5";
}
PARSER_BEGIN(Calculator)
package com.test.parser;
public class Calculator{}PARSER_END(Calculator)
SKIP:{
  " "
  | "\t"
  | "\n"
  | "\r"
}
TOKEN:{
  <ADD:("+")>
  | <SUB:("-")>
  | <MUL:("*")>
  | <DIV:("/")>
  | <LBR:("(")>
  | <RBR:(")")>
  | <INT:(["0"-"9"])+>
}
int calculate():{
  int result;
}
{
  result = expr(){
    return result;
  }
}
int expr():{
  int a;
  int b;
  int result = 0;
}
{
  a = term(){
    result+=a;
  }
  (<ADD>b = term(){
    result+=b;
  }
  | <SUB>b = term(){
    result-=b;
  }
  )*{
    return result;
  }
}
int term():{
  int a;
  int b;
  int result = 0;
}
{
  a = factor(){
    result = a;
  }
  (<MUL>b = factor(){
    result*=b;
  }
  | <DIV>b = factor(){
    result/=b;
  }
  )*{
    return result;
  }
}
int factor():{
  Token t;
  int result;
}
{
  t = <INT>{
    return Integer.parseInt(t.image);
  }
  | <LBR>result = expr()<RBR>{
    return result;
  }
}
